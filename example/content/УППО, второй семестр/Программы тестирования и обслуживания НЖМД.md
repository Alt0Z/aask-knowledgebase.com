/*
Title: 
Sort: 19
*/

Victoria - тестирование, сервисное обслуживание дисков с интерфейсами IDE и Serial ATA

ВНИМАНИЕ! Эта документация, возможно, морально устарела и пред- назначена для ознакомительных целей в "полевых условиях". Для получения самой последней информации воспользуйтесь форумом и WEB-вариантом этого документа на официальном сайте программы - http://hdd-911.com/

I.Назначение

Программа ориентирована на широкий круг пользователей ПК, и предназначена для тестирования, сервисного обслуживания и помощи при восстановлении информации с любых жестких дисков с интерфейсами IDE и Serial ATA. Программа представляет собой полностью готовое решение для всесторонней, глубокой, и в тоже время максимально быстрой оценки реального технического состояния HDD. В ней собраны возможности большинства фирменных диагностических утилит для HDD, и другие полезные функции, имеющиеся в ATA стандарте на современные жесткие диски, однако нет ограничений на поддерживаемые модели.

Цель написания freeware версии - помочь вовремя обнаружить неисправность жесткого диска. Также программа защищает интересы профессиональных ремонтников, ибо своевременное обнаружение болезни - залог успешного её лечения. Нередко пользователь остается в неведении о состоянии жесткого диска, вплоть до серьезной его аварии, когда уже ничего нельзя сделать (информация сильно испорчена, или для ее восстановления требуются серьезные материальные затраты). Данная программа совмещает в себе как профессиональные, так и бытовые функции, и позволяет протестировать винчестер пользователям без специальных знаний. В тоже время, программа не имеет никаких ограничений на доступ к тестируемому жесткому диску, и в руках специалиста может служить мощным диагностическим инструментом в нестандартных, и в неописанных в документации ситуациях.

Другая возможная область применения - измерение скоростных характеристик накопителей. Большинство бенчмарк-программ написаны под многозадачные ОС, и работают с диском через цепочку API+дисковый драйвер, что требует инициализации накопителя в системе, и наличия включенного режима UDMA. Виктория работает с винчестером напрямую, и кроме всего, позволяет интерактивно управлять тестированием. Автор не преследовал цель написать бенчмарк для HDD, однако некоторые методы тестирования были высоко оценены коллегами, и поэтому включены в эту версию.

Программа может служить хорошим подспорьем для работников фирм, занимающихся продажей, сборкой и обслуживанием компьютеров. Благодаря функции тестирования интерфейса, можно мгновенно распознать некачественный шлейф или нарушение контакта в нем.

Следует отметить, что Виктория показывает только физическое состояние диска. Дефекты файловых систем останутся незамеченными - для их обнаружения существуют системные утилиты (например, SCANDISK, NDD). В тоже время, если на ПК периодически пропадают или портятся данные, а на его винчестере обнаруживаются явные физические проблемы разумно предположить, что именно они и являются причиной сбоев.

Все операции с диском реализованы через порты контроллера, поэтому программе не требуется поддержка испытуемых винчестеров материнской платой и определение их в BIOS'е. Также, программе не важно, есть ли на диске какая либо файловая система, какой размер кластера, и сколько на HDD логических разделов - она показывает диск в таком виде, как это задумали разработчики HDD (в соответствии со спецификацией ATA/ATAPI7), на весь физический объем, независимо от Вашего компьютера, BIOS'а и операционной системы.

Основные возможности программы

Чтение паспорта диска и вывод на экран полной технической информации о накопителе;
Определение установленных в системе ATA/SATA контроллеров (включая дополнительные);
Управление уровнем акустического шума;
Просмотр S.M.A.R.T. параметров накопителя, быстрая оценка его состояния по псевдографическим шкалам и по регистру статуса BAD GOOD ;
Работа с Host Protected Area: изменение физического объема диска;
5 режимов тестирования поверхности, верификацией, чтением и записью, с подсчетом и отображением адресов дефектных блоков;
Режим дефектоскопии: анализ состояния поверхности 3-мя видами тестов, с подсчетом и отображением нестабильных участков, с указанием точных адресов каждого нестабильного сектора и автоматическим занесением их в текстовый файл;
Тестирование буферной памяти и интерфейса на наличие "глюков" и искажения информации при приеме и передаче;
Скрытие дефектов поверхности методом переназначения секторов из резерва (remap) на любом из 3-х тестов;
Измерение производительности жесткого диска (бенчмарк функции):
Измерение скорости линейного, нелинейного и случайного чтения с HDD;
Измерение скорости позиционирования головок HDD и времени доступа к секторам;
Очистка диска (или его части) от информации - "низкоуровневое форматирование;
Управление опциями безопасности: установка пароля на HDD, снятие пароля, быстрое стирание информации без возможности её восстановления и т.п.
Возможность остановки и запуска шпиндельного двигателя HDD;
Тест позиционирования головок HDD (аналогично тому, как это делает ОС при интенсивной работе), с целью выявления надежности и термоустойчивости дисковой подсистемы ПК (приводит к разогреву HDD);
Посекторное копирование произвольной области HDD в файл, с пропуском дефектных участков (может быть полезно для спасения информации с поврежденного диска);
Посекторное копирование файлов на HDD;
Просмотр информации о логических разделах HDD с указанием границ разделов (без определения HDD в BIOS);
Индикация режимов работы HDD, содержимого регистров, и визуализация кодов ошибок по индикаторным лампочкам;
Встроенная контекстно-зависимая система помощи по клавишам и консольным командам.
II. Системные требования:

CPU не ниже Intel Pentium. Существует также версия 2.9x, работаю щая на любом CPU от 486DX;
Операционная система - DOS 4.0 или выше, Windows 9x, Me, 2000/XP (загрузочная версия Виктории имеет свою ОС, и может работать да же на "голом" компьютере с одним HDD);
RAM 640k или выше;
Видеокарта - не ниже CGA (цветной текстовый режим 80х25);
Клавиатура;
Желательно иметь хороший блок питания и хорошее охлаждение тестируемого HDD;
Здесь и далее в тексте - слова-синонимы:

HDD = диск = жесткий диск = винчестер = винт = накопитель;
сдох = вышел из строя = приказал долго жить = испортился;
BIOS = биос (базовая система ввода-вывода с точки зрения программиста);
ОС = операционная система; фича (feature) = фишка = опция = функция;
глюк = баг = ошибка = неправильное поведение;
SMART = S.M.A.R.T. = встроенная в винчестер система самоконтроля.
III. Установка программы и ее запуск

(Только для не-загрузочных версий 3.0 - 3.4)

Программа состоит из единственного исполняемого файла и вспомогательного файла конфигурации vcr.ini. Файл vcr.ini не является обязательным и служит для точной настройки Виктории на определенные условия работы, что позволяет достичь максимального удобства (например, туда можно прописать адреса внешнего PCI ATA контроллера, чтобы каждый раз не выбирать нужный винт через меню), отключить звук итп.

Программа является ДОС приложением, работающем в однозадачном ре жиме, и имеющем текстовый интерфейс. Поэтому для работы Вам потребуется соответствующая операционная система. Это может быть, напри мер, загрузочный компакт-диск, сделанный на основе дискеты от Windows 9х или Windows Me, сама дискета, или даже винчестер. Можно запускать программу и непосредственно под Windows, и она будет прекрасно работать, но для этого нужно выполнить одно из условий:

Отключить (Панель управления > Система > оборудование > контроллеры жестких дисков) тот канал IDE контроллера, к которому подключен испытуемый винчестер. Это нужно для того, чтобы программа могла обращаться напрямую к портам HDD.
Можно не отключать канал в системе, но тогда при загрузке Windows к этому каналу ничего не должно быть подключено (а иначе ОС, найдя ATA устройство, заблокирует порты). Если Вы выбрали этот вариант, то подключать винчестер нужно после загрузки системы. Или, как вариант, включать в испытуемый винчестер питание только после полной загрузки ОС (не все дешёвые блоки питания это "терпят")
Абсолютно бессмысленно отключать винчестер в BIOS, ибо современные многозадачные операционные системы не пользуются BIOS'ом для проверки наличия HDD на канале. За него это делает драйвер. А вот если у Вас "чистый" DOS - отключение HDD в BIOS'е будет полезно, для того, чтобы сама DOS не видела этот диск (и чтобы не использовала таким образом порты, что теоретически может привести к конфликтам между ОС и программой).
При работе из под систем на ядре Windows NT необходимо установить драйвер UserPort. Для этого нужно:

Скачать UserPort, например тут: http://hdd-911.com/downloads/UserPort.zip
Скопировать файл userport.sys в папку WINDOWS\SYSTEM32\DRIVERS
Запустить userport.exe. Перед нами появится панель с 2-мя окошками. Левое окошко относится к работе программы в ДОС-окне, правое - на полном экране. По умолчанию в них прописаны номера портов LPT - все их можно удалить. В оба окна нужно вписать номера портов secondary-контроллера HDD:
170h-177h
376h-377h
Добавить их в список ("Add");
Нажать кнопку "Start";
Нажать кнопку "Update", затем "Exit";
Запустить Викторию. Все должно работать как в окне, так и на полном экране. Имейте в виду, что под NT-системами не будет работать поиск винчестеров на внешних контроллерах.
Эти тезисы являются основными и при работе с другими аналогичными программами, получающими доступ к оборудованию через порты.

Примечание:

Загрузочная дискета Windows XP не подходит для запуска программы!;
Очень полезным окажется какой-нибудь файл-менеджер, например Volkov Commander (для "чистого" DOS) или FAR (для Windows). Следует отметить, что внутри Виктории есть встроенный файл менеджер.
После запуска программы на экране появится ее интерфейс, состоящий из следующих основных частей:

Самая верхняя строка: информация о версии программы и о ее авторе.
Вторая строка: индикаторные лампочки регистров HDD, позволяющие судить о том, чем занят накопитель в данный момент.
Третья строка: в нее выводится название модели испытуемого HDD, его серийный номер и некоторая другая информация.
Самая нижняя строка: подсказки по функциональным клавишам.
Вторая строка снизу: "Status Box" - отображает наиболее актуальные системные события. Например, сообщения об ошибках или ожидание готовности винчестера.
Третья строка снизу - пустая.
Все остальное - рабочий стол программы. На нем отображается весь процесс работы с накопителем.
IV. Управление программой

Для управления используется клавиатура ПК, поддержка других устройств ввода отсутствует.

Выбор интерфейса

Выбор IDE/SATA винчестера на стандартном порту

Возможно, при первом запуске Вам потребуется выбрать именно тот винчестер, который Вы хотите протестировать (а не тот, что прописан в файле vcr.ini - в дистрибутиве там указан Secondary Master). Для этого необходимо нажать клавишу P. Появится меню с названиями каналов. Выбор производится клавишами управления курсором "вверх" и "вниз". При перемещении курсора, в реальном времени отображается индикация (лампочки), что позволяет судить о готовности HDD. У исправного винчестера всегда будут гореть 2 лампочки: DRSC и DRDY (у некоторых может еще и INX). В регистрах ошибок может быть зажжена красная лампочка AMNF, а остальные должны быть погашены. Подробнее о назначении индикаторов см. ниже. После установки курсора на нужный пункт необходимо нажать ENTER.

Выбор винчестера на внешнем (дополнительном) PCI/ATA/SATA/RAID контроллере

Осуществляется в самом нижнем пункте меню. После нажатия ENTER начнется поиск внешних контроллеров и винчестеров на них. Определятся только реально присутствующие и исправные винчестеры, остальные система "не заметит". При нахождении каждого дополнительного порта в таблицу будет выдано:

Название фирмы-изготовителя ATA-контроллера (или его Vendor Code);
Название контроллера (или его ID Code);
Класс: EXT / INT / RAID (внешний, внктренний, RAID);
Адрес порта (или прочерк, если его не удалось определить);
Название подключенного винчестера, если он имеется на канале, и исправен;
Все найденные порты будут пронумерованы. Вам останется лишь выбрать нужный, нажав соответствующую клавишу.

Примечание: программа может не найти винчестеры на некоторых моделях контроллеров Promise.

Чтение паспорта диска

Паспорт HDD - это зашитая на заводе изготовителе информация, характеризующая семейство HDD и его индивидуальные особенности. В него входит название семейства, название модели, уникальный серийный номер, версия встроенного микрокода, логические параметры (геометрия), параметры интерфейса и многое другое. Паспорт необходим для правильной идентификации устройства. Если паспорт винчестера по каким-то причинам потерян, HDD становится негодным, ибо ни одна программа не сможет использовать его по назначению.

Паспорт отдается при нажатии клавиши F2.

Вот что мы получаем оттуда (сверху вниз):

Полное название модели и версию встроенного микрокода;
Серийный номер HDD;
Количество доступных физических секторов (LBA);
Объем диска в байтах;
Параметры CHS (число цилиндров, логических головок, секторов (актуально только для винчестеров < 8,4 Гб).
SMART (статус). Enabled/Disabled - показывает, включен ли SMART мониторинг в самом накопителе.
Errlog - внутренние журналирование ошибок.
Selftest - внутренний самотест (обычно это тест поверхности в то время, когда к винту не происходит обращений извне). Если в накопителе присутствует что нибудь из этого, в паспорте появится надпись "[...] present". Имейте в виду, что на некоторых винчестерах самотест может быть отключен в паспорте, но реально присутствовать и работать.
Состояние дискового кэша. Программа делает попытку определить его размер, если это не удается, сообщает "unknown size";
Look ahead - предвыборка чтения. Может быть включена или выключена. Выключенная предвыборка говорит о том, что или винчестер очень старый (не поддерживает эту функцию, либо она отключена утилитами/сглючила. Винчестер с отключенной предвыборкой работает очень медленно, и обычно это сразу заметно при работе с файлами.
Write - кэширование записи. Осуществляет отложенную запись буфера на диск, для ускорения файловых операций. Может быть включено или выключено. У всех современных винчестеров включено по умолчанию.
Поддерживаемые режимы. Это наиболее интересная часть паспорта. В ней указано, какие технические возможности есть у данной модели HDD. Вот расшифровка сокращений:
HPA - Host Protected Area: винчестер поддерживает возможность изменения физического объема.
CHS - Cylinder/Head/Sector: режим адресации дискового пространства (произошедший от накопителей FDD и первых HDD), позволяющий обращаться раздельно к головкам, секторам и дорожкам. В современных накопителях логическая CHS геометрия оставлена для совместимости со старыми программами и BIOS.
LBA - Logical Block Addressing: винчестер поддерживает адресацию логическими блоками, что является стандартом де-факто для современных HDD, ОС и BIOS.
PIO - Programmable Input/Output: программный ввод вывод, режим обмена данными между винчестером и оперативной памятью, осуществляемый при участии центрального процессора ПК. Характеризуется простотой реализации, надежностью и универсальностью, однако отнимает процессорное время, что делает этот режим непригодным для многозадачных систем.
DMA - Direct Memory Access: винчестер поддерживает прямой доступ к памяти, что позволяет разгрузить центральный процессор ПК при обмене с диском. Также как и LBA, этот режим является нормой, а не исключением для современных HDD. В скобках приведены предельные режимы, в которых винчестер может использовать DMA.
AAM - Automatic Acoustic Management: винчестер позволяет программно управлять уровнем акустического шума. Это достигается за счет изменения скорости позиционирования головок.
APM - Advanced Power Management: винчестер имеет встроенные средства управления энергопотреблением, что позволяет сделать систему более экономичной и, в некоторых случаях, повысить надежность винта (за счет меньшего тепловыделения и парковки головок). Для настольных систем малоактуально.
DLMC - Download Microcode: винчестер позволяет обновлять себе "прошивку" путем загрузки внешнего микрокода (распространяется производителями HDD и фирменных ПК в качестве апдейтов микропрограмм).
FLC - Flush Cache: винчестер поддерживает команду принудительного сброса кэша на диск. Вероятно, эта команда предназначена для снижения риска потери данных при внезапном отключении питания.
SMS - Set Max Security Support: лень описывать эту фигню:) Если интересно читайте ATA стандарт.
DCO - Device Configuration Overlay: винт поддерживает конфигурирование набора некоторых АТА функций по желанию пользователя. К ним относятся включение и выключение SMART, поддержки адресации 48 бит, AAM, изменение предельных режимов DMA и т.д. (см. также раздел "Восстановление конфигурации диска")
Current AAM value: Текущее значение установленного уровня шума. 128 означает, что уровень минимальный, 0 максимальный. Программа позволяет менять это значение произвольно, регулируя шум. Состояние AAM запоминается даже после отключения питания. Рядом находится рекомендуемое производителем значение.
Current APM value: Текущее значение режима энергосбережения. Как и у AAM, 128 означает минимальное энергопотребление, 0 максимальное. У винчестеров для настольных ПК оно почти всегда равно 0, у мобильных может иметь разные значения, устанавливаемые утилитами энергосбережения. К сожалению, значение APM не сохраняется после отключения питания, поэтому в Виктории его регулировка не предусмотрена. Однако многие фирменные утилиты для HDD умеют переключать APM "навсегда" с помощью технологических команд.
Current power mode: Текущий режим энергопотребления. Фактически говорит о том, крутится ли в данный момент вал HDD. Удобно для тихих винчестеров, тем более программа позволяет остановить вал в любой момент.
Security erase time: Время, за которое подсистема безопасности диска способна стереть всю информацию и снять пароль. Обычно оно соизмеримо с временем верификации, т.е. информация стирается без участия интерфейса и с максимально возможной скоростью. Интересно то, что у некоторых моделей HDD в паспорте на этом месте записан 0. В этом случае время стирания на экран не выводится. Не будет оно выводится и в случае отсутствия опций безопасности у тестируемого HDD.
Security (статус).
ON: винчестер запаролен ATA паролем (наличие установленного на винт пароля также индицирует лампочка PWD в верху экрана);
OFF: на винчестере не установлен пароль;
High, Maximum: уровень секретности установленного пароля
Frozen:винчестер в состоянии Freeze-lock (парольная система работает, но временно заблокирована);
Expired: пароль пытались неудачно снимать 5 раз. В результате чего HDD заблокировал парольную систему до выключения питания;
Locked: установлен пароль, доступа к информации нет.
Unlocked: винчестер открыт, есть доступ к информации. При этом пароль может быть установлен, если HDD временно открыт командой UNLOCK.
Not supported: винчестер не имеет системы парольной защиты.
Программный сброс диска

Выполняется клавишей F3. Эта операция останавливает внутреннюю работу HDD (если он был занят обработкой команды или самотестом) и приводит интерфейс в состояние по умолчанию (очищает регистры после предыдущей команды и выставляет готовность к приему следующей). Необходим для диагностики накопителя, прерывания зависшей микропрограммы винта, и т.д. Выполняется сразу после нажатия кнопки. Также работает и непосредственно во время операций с диском (например, чтения). Признаком успешного сброса будет включенный индикатор AMNF

Работа с поверхностью HDD

В программу встроен мощный сканер поверхности HDD, который позволяет продиагностировать HDD на наличие сбойных участков, плавающих дефектов и ошибок интерфейса. Программа способна протестировать большинство винчестеров на предельной скорости, независимо от типа ATA контроллера и интерфейсного кабеля.

Особенностью сканера является применение эксклюзивных алгоритмов, не встречающихся до этого в других аналогичных утилитах. К ним относится автоматическое распознавание поддерживаемых стандартов, и настройка таймера в соответствии с быстродействием тестируемого HDD. Это позволяет эффективно проверять как медленные, так и быстрые диски. А оригинальный метод измерения временных интервалов позволяет работать под виртуальными ДОС машинами WINDOWS практически без снижения точности.

Скан поверхности работает в тесной взаимосвязи с паспортом HDD, получая из него все необходимые параметры. Поддерживаются режимы LBA 28 и 48 бит, которые распознаются автоматически. Все что можно было автоматизировать - успешно реализовано, и не требует никаких настроек со стороны пользователя.

Для того, чтобы протестировать поверхность винчестера, нажмите клавишу F4 "Scan". При этом на экране появится менюшка, назначение пунктов которой понятно из выводимого в ней текста. Рассмотрим третий сверху пункт он имеет 6 состояний, которые можно переключать клавишей "пробел" или клавишами стрелок "вправо" и "влево".

Линейное чтение (до версии 3.1 было "верификация")

Тестирование поверхности в LBA адресации. Предназначено для максимально быстрой и точной диагностики состояния поверхности. Во время тестирования все адресное пространство винчестера разбивается на условные участки одинаковой длины блоки. Размер одного блока равен 256-ти секторам. Программа измеряет время доступа к каждому блоку по команде верификации, и по нему на экране рисуется прямоугольник соответствующего цвета. При этом данные физически читаются с диска, но не передаются по интерфейсу, поэтому это самый быстрый способ проверки поверхности, с ним может сравниться только работа в предельных UDMA режимах (исключение Seagate Barracuda IV, V и 7200.7 с версиями микрокода 3.xx. Для этих HDD скорость верификации ~28-32 мб/сек является нормальной).

Если винчестер зависнет из-за неисправности во время сканирования, программа ждет около 16 секунд, после чего перейдет к следующему блоку, выводя значок T (Timeout) в поле скана. Непрерывные задержки свидетельствуют о том, что HDD не отвечает на команды - можно попробовать подать команду сброса в его контроллер, нажав F3 непосредственно во время скана, иногда это помогает.

Случайное чтение:

Тестирование поверхности, когда адреса блоков выдает генератор случайных чисел. Диапазон можно задать в виде границ LBA в меню скана. При этом также измеряется время доступа к каждому блоку, но в отличие от линейного чтения, оно будет больше т.к. складывается из времени позиционирования головки на нужный цилиндр и собственно, чтения (возможно, что и из эффективности алгоритма кэширования [предположение автора]). Полученный результат достаточно точно отражает общее быстродействие диска в реальных задачах, когда винчестеру приходится совершать много циклов чтения данных из разных мест (во время работы ОС читаются не только фрагменты файла, но и части служебных таблиц файловой системы, расположенных в отдалении от тела файла). И действительно, средняя скорость чтения около 8 мб/сек совпадает с показаниями других программ (например FAR) при копировании файлов. Также эта скорость зависит от настроек, влияющих на скорость позиционирования

BUTTERFLY- чтение:

Тестирование поверхности по алгоритму "бабочка", когда попеременно читаются начало и конец дискового пространства, каждый раз со сдвигом на 1 блок (256 секторов), в результате чего к концу теста головки оказываются в середине рабочей зоны HDD. Этот алгоритм совмещает в себе позиционирование на разные дистанции, а также прямое и реверсивное чтение, и применяется в профессиональных утилитах, в том числе при заводском тестировании винчестеров средствами селфскана. Отличие от случайного чтения в том, что butterfly - это тест всей поверхности с позиционированием, сканирующий все секторы HDD по определенному закону и имеющий окончание. Случайное чтение - это агрессивный тест, не имеющий окончания и закономерности, и он почти не предсказывается алгоритмами предвыборки. Оба теста создают большую нагрузку на блок головок и электронику, поэтому позаботьтесь о хорошем охлаждении HDD воизбежании его порчи. Также следует отметить, что Butterfly выполняет проверку медленней, чем линейное чтение, и на винчестере в 10 Гб может длиться около 30 минут. Причина - потери времени на перемещение головок, и постоянные ожидания поворота дискового пакета на нужный угол. Как и в предыдущих тестах, диапазон можно задать в виде границ LBA в меню. Допустимо использовать сброс и вызывать справку во время проверки. Все 3 вида тестов могут работать совместно с дефектоскопом и ремапами - их выбирают в 4 пункте меню.

PIO-чтение (в версии до 3.1 было "Чтение")

В отличие от верификации, используется настоящее чтение секторов из винчестера. Отличается более низкой скоростью - около 2-8 мб/сек (1 Гб читается 2-7 минут), поэтому целесообразно лишь для небольших участков. Применяется не для измерений, а в основном для отлова "глюков" винта, проверки работоспособности канала чтения и интерфейса. В реальных условиях компьютер работает с винчестером в режиме DMA, где скорость намного больше (и производители оптимизируют HDD именно под DMA режим).

С помощью PIO-чтения можно выбрать наиболее быструю модель HDD для установки в систему, не поддерживающую режим DMA. Такие системы до сих пор встречаются, например учетно-кассовые машины, медицинское диагностическое и музыкальное оборудование, различные роботы (например, автоматические узлы FTN сетей).

Примечание: Для повышения скорости работы в PIO нужно принудительно включить максимальный режим в BIOS. Обычно там стоит "Auto" по умолчанию, замена его на PIO 4 позволит поднять скорость более чем в 2 раза. Также она зависит от общего быстродействия ПК.

PIO-чтение в файл (в версии до 3.1 было "Чтение в файл")

В отличие от "просто чтения" данные с винчестера пишутся в файл в текущем каталоге. Программа корректно обрабатывает бэд-блоки, не "вылетая" на них, вся остальная информация сектор за сектором пишется в файл (вместо дефектных участков вставляются нули). Начиная с версии 3.1 - применен алгоритм от профессиональной программы, обеспечивающий достаточно высокую скорость в PIO 4 и динамический переход с блочного чтения на посекторное в зависимости от ошибок блока. Число попыток чтения сектора при ошибке равно двум: первый раз при блочном доступе, второй при посекторном для более полного извлечения данных из поврежденных накопителей с активной предвыборкой чтения. Сброс для ускорения обработки ошибок и "длинное чтение" в бесплатной версии отключены. В связи с практической бесполезностью кодов ошибок HDD при чтении в файл они не выводятся, хотя и обрабатываются. Вместо них программа сообщает "I/O error" и номер дефективного LBA.

Содержимое дефектного сектора заполняется нулями и пишется в файл. Он имеет ограничение 2 Гб, если копирование производится на раздел FAT32, однако в NTFS никаких ограничений нет. При вводе имени файла без расширения ему автоматически будет присвоено расширение *.trk

Итог: для спасения информации с накопителя, имеющего дефекты, рекомендуется запускать Викторию с раздела NTFS, на котором помимо самой программы имеется достаточное количество свободного места. Обычно это система Windows 2000 или XP. Перед применением желательно установить режим PIO-4 для SECONDARY канала в BIOS компьютера (для увеличения скорости чтения), затем загрузить Windows с драйвером UserPort, и только после этого подавать в копируемый HDD питание - это гарантирует отсутствие обращений Windows к винчестеру.

Запись (стирание):

Производит посекторное стирание информации с диска, блоками по 256 секторов. Может использоваться для устранения некоторых видов дефектов (аналогично низкоуровневому форматированию программами от производителей HDD). По скорости сравнимо с PIO-чтением. Следует отметить, что существует более быстрый способ очистки диска от информации - стирание через подсистему безопасности. Читайте об этом в разделе "Безопасность".

Запись из файла:

Пишет содержимое файла на диск посекторно, начиная с Start LBA и заканчивая длиной файла. Для выбора файла откроется окно встроенного менеджера. Длина вычисляется автоматически, под нее подстраивается счетчик процентов. Скорость достигает 6 Мб/сек. Процесс сопровождается визуальным сканом, обрабатывается время и блочные ошибки. Функция может быть полезна для коррекции разрушений файловых систем совместно с HEX редактором, и для клонирования небольших дисков.

Проверка интерфейса:

Производит циклическую запись шаблона данных в буферную память винчестера, затем чтение оттуда и сравнение прочитанного с записанным. При этом измеряется время чтения из буфера в диапазоне от 64 до 500 мкс. На этом тесте хорошо видно, что такое многозадачность встроенной в винт микропрограммы - время чтения разных циклов получается разное и зависит от модели HDD и от его режима работы. При несовпадении записанного с прочитанным выводится сообщение с указанием времени по часам. Наличие таких ошибок говорит о неисправности интерфейса или буферной памяти винта, и такой накопитель считается потенциально опасным, так как может исказить хранящуюся на нем информацию. Для получения высокой достоверности нужно выполнять этот тест достаточно долго, аналогично тестам оперативной памяти компьютера. Во время тестирования рекомендуется пошевелить IDE шлейф для диагностики плохих контактов, которые тут же будут обнаружены программой.