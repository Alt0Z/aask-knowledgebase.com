/*
Title: 
Sort: 18
*/

Устройство и принцип работы жесткого диска

Накопитель на жестком магнитном диске (НЖМД) \ HDD (Hard Disk Drive) \ винчестер (носитель) – материальный объект, способный хранить информацию.

Накопители информации могут быть классифицированы по следующим признакам:

способу хранения информации: магнитоэлектрические, оптические, магнитооптические;
виду носителя информации: накопители на гибких и жестких магнитных дисках, оптических и магнитооптических дисках, магнитной ленте, твердотельные элементы памяти;
способу организации доступа к информации — накопители прямого, последовательного и блочного доступа;
типу устройства хранения информации — встраиваемые (внутренние), внешние, автономные, мобильные (носимые) и др.

Значительная часть накопителей информации, используемых в настоящее время, создана на базе магнитных носителей.

Устройство жесткого диска

Винчестер содержит набор пластин, представляющих чаще всего металлические диски, покрытые магнитным материалом – платтером (гамма-феррит-оксид, феррит бария, окись хрома…) и соединенные между собой при помощи шпинделя (вала, оси).
Сами диски (толщина примерно 2мм.) изготавливаются из алюминия, латуни, керамики или стекла. (см. Рис)

Для записи используются обе поверхности дисков. Используется 4-9 пластин. Вал вращается с высокой постоянной скоростью (3600-7200 оборотов/мин.)
Вращение дисков и радикальное перемещение головок осуществляется с помощью 2-х электродвигателей.
Данные записываются или считываются с помощью головок записи/чтения по одной на каждую поверхность диска. Количество головок равно количеству рабочих поверхностей всех дисков.

Запись информации на диск ведется по строго определенным местам — концентрическим дорожкам (трекам). Дорожки делятся на сектора. В одном секторе 512 байт информации.

Обмен данными между ОЗУ и НМД осуществляется последовательно целым числом (кластером). Кластер — цепочки последовательных секторов (1,2,3,4,…)

Специальный двигатель с помощью кронштейна позиционирует головку чтения/записи над заданной дорожкой (перемещает ее в радиальном направлении).
При повороте диска головка располагается над нужным сектором. Очевидно, что все головки перемещаются одновременно и считывают инфоголовки перемещаются одновременно и считывают информацию с одинаковых дорожек разныхрмацию с одинаковых дорожек разных дисков.

Дорожки винчестера с одинаковым порядковым номером на разных дисках винчестера называется цилиндром.
Головки чтения записи перемещаются в вдоль поверхности платтера. Чем ближе к поверхности диска находится головка при этом не касаясь ее, тем выше допустимая плотность записи.


Устройство винчестера

Магнитный принцип чтения и записи информации


магнитный принцап записи информации
Физические основы процессов записи и воспроизведения информации на магнитных носителях заложены в работах физиков М.Фарадея (1791 — 1867) и Д. К. Максвелла (1831 — 1879).

В магнитных носителях информации цифровая запись производится на магнито чувствительный материал. К таким материалам относятся некоторые разновидности оксидов железа, никель, кобальт и его соединения, сплавы, а также магнитопласты и магнитоэласты со вязкой из пластмасс и резины, микропорошковые магнитные материалы.

Магнитное покрытие имеет толщину в несколько микрометров. Покрытие наносится на немагнитную основу, в качестве которой для магнитных лент и гибких дисков используются различие пластмассы, а для жестких дисков — алюминиевые сплавы и композиционные материалы подложки. Магнитное покрытие диска имеет доменную структуру, т.е. состоит из множества намагниченных мельчайших частиц.

Магнитный домен (от лат. dominium — владение) — это микроскопическая, однородно намагниченная область в ферромагнитных образцах, отделенная от соседних областей тонкими переходными слоями (доменными границами).

Под воздействием внешнего магнитного поля собственные магнитные поля доменов ориентируются в соответствии с направлением магнитных силовых линий. После прекращения воздействия внешнего поля на поверхности домена образуются зоны остаточной намагниченности. Благодаря этому свойству на магнитном носителе сохраняется информация, действовавшем магнитном поле.

При записи информации внешнее магнитное поле создается с помощью магнитной головки. В процессе считывания информации зоны остаточной намагниченности, оказавшись напротив магнитной головки, наводят в ней при считывании электродвижущую силу (ЭДС).

Схема записи и чтения с магнитного диска дана на рис.3.1 Изменение направления ЭДС в течение некоторого промежутка времени отождествляется с двоичной единицей, а отсутствие этого изменения — с нулем. Указанный промежуток времени называется битовым элементом.

Поверхность магнитного носителя рассматривается как последовательность точечных позиций, каждая из которых ассоциируется с битом информации. Поскольку расположение этих позиций определяется неточно, для записи требуются заранее нанесенные метки, которые помогают находить необходимые позиции записи. Для нанесения таких синхронизирующих меток должно быть произведено разбиение диска на дорожки
и секторы — форматирование.

Организация быстрого доступа к информации на диске является важным этапом хранения данных. Оперативный доступ к любой части поверхности диска обеспечивается, во-первых, за счет придания ему быстрого вращения и, во-вторых, путем перемещения магнитной головки чтения/записи по радиусу диска.
Гибкий диск вращается со скоростью 300—360 об/мин, а жесткий диск — 3600— 7200 об/мин.


Логическое устройство винчестера

Магнитный диск первоначально к работе не готов. Для приведения его в рабочее состояние он должен быть отформатирован, т.е. должна быть создана структура диска.

Структура (разметка) диска создается в процессе форматирования.

Форматирование магнитных дисков включает 2 этапа:

физическое форматирование (низкого уровня)
логическое (высокого уровня).
структура диска
структура диска
При физическом форматировании рабочая поверхность диска разбивается на отдельные области, называемые секторами, которые расположены вдоль концентрических окружностей – дорожек.

Кроме того, определяются сектора, непригодные для записи данных, они помечаются как плохие для того, чтобы избежать их использования. Каждый сектор является минимальной единицей данных на диске, имеет собственный адрес для обеспечения прямого доступа к нему. Адрес сектора включает номер стороны диска, номер дорожки и номер сектора на дорожке. Задаются физические параметры диска.

Как правило, пользователю не нужно заниматься физическим форматированием, так как в большинстве случаев жесткие диски поступают в отформатированном виде. Вообще говоря, этим должен заниматься специализированный сервисный центр.

Форматирование низкого уровня нужно производить в следующих случаях:

если появился сбой в нулевой дорожке, вызывающий проблемы при загрузке с жесткого диска, но сам диск при загрузке с дискеты доступен;
если вы возвращаете в рабочее состояние старый диск, например, пе¬реставленный со сломавшегося компьютера.
если диск оказался отформатированным для работы с другой операционной системой;
если диск перестал нормально работать и все методы восстановления не дали положительных результатов.
Нужно иметь в виду, что физическое форматирование является очень сильнодействующей операцией — при его выполнении данные, хранившиеся на диске будут полностью стерты и восстановить их будет совершенно невозможно! Поэтому не приступайте к форматированию низкого уровня, если вы не уверены в том, что сохранили все важные данные вне жесткого диска!

После того, как вы выполните форматирование низкого уровня, следует очередной этап — создание разбивки жесткого диска на один или несколько логических дисков — наилучший способ справиться с путаницей каталогов и файлов, разбросанных по диску.

Не добавляя никаких аппаратных элементов в вашу систему, Вы получаете возможность работать с несколькими частями одного жесткого диска, как с несколькими накопителями.
При этом емкость диска не увеличивается, однако можно значительно улучшить его организацию. Кроме того, различные логические диски можно использовать для различных операционных систем.

При логическом форматировании происходит окончательная подготовка носителя к хранению данных путем логической организации дискового пространства.
Диск подготавливается для записи файлов в сектора, созданные при низкоуровневом форматировании.
После создания таблицы разбивки диска следует очередной этап — логическое форматирование отдельных частей разбивки, именуемых в дальнейшем логическими дисками.

Логический диск — это некоторая область жесткого диска, работающая так же, как отдельный накопитель.

Логическое форматирование представляет собой значительно более простой процесс, чем форматирование низкого уровня.
Для того, чтобы выполнить его, загрузитесь с дискеты, содержащей утилиту FORMAT.
Если у вас несколько логических дисков, последовательно отформатируйте все.

В процессе логического форматирования на диске выделяется системная область, которая состоит из 3-х частей:

загрузочного сектора и таблица разделов (Boot reсord)
таблицы размещения файлов (FAT), в которых записываются номера дорожек и секторов, хранящих файлы
корневой каталог (Root Direсtory).
Запись информации осуществляется частями через кластер. В одном и том же кластере не может быть 2-х разных файлов.
Кроме того, на данном этапе диску может быть присвоено имя.

Жесткий диск может быть разбит на несколько логических дисков и наоборот 2 жестких диска может быть объединены в один логический.

Рекомендуется на жеском диске создавать как минимум два раздела(два логических диска): один из них отводится под операционную систему и программное обеспечение, второй диск исключительно выделяется под данные пользователя. Таким образом данные и системные файлы хранятся отдельно друг от друга и в случае сбоя операционной системы гораздо больше вереятность сохранения данных пользователя.


Характеристики винчестеров

Жесткие диски (винчестеры) отличаются между собой следующими характеристиками:   hdd2

емкостью
быстродействием – временем доступа к данным, скоростью чтения и записи информации.
интерфейсом (способ подключения) — типом контролера, к которому должен присоединяться винчестер (чаще всего IDE/EIDE и различные варианты SСSI).
другие особенности
1. Емкость — количество информации, помещающееся на диске (определяется уровнем технологии изготовления).
На сегодня емкость составляет 500 -2000 и более Гб. Места на жестком диске никогда не бывает много.


2. Скорость работы (быстродействие) диска характеризуется двумя показателями: временем доступа к данным на диске и скоростью чтения/записи на диске.

Время доступа – время необходимое для перемещения (позиционирования) головок чтения/записи на нужную дорожку и нужный сектор.
Среднее характерное время доступа между двумя случайно выбранными дорожками примерно 8-12мс(миллисекунд), более быстрые диски имеют время 5-7мс.
Время перехода на соседнюю дорожку (соседний цилиндр) меньше 0.5 — 1.5мс. Для поворота в нужный сектор тоже нужно время.
Полное время оборота диска для сегодняшних винчестеров 8 – 16мс, среднее время ожидания сектора составляет 3-8мс.
Чем меньше время доступа, тем быстрее будет работать диск.

Скорость чтения/записи (пропускная способность ввода/вывода) или cкорость передачи данных (трансферт) – время передачи последовательно расположенных данных, зависит не только от диска, но и от его контроллера, типы шины, быстродействие процессора. Скорость медленных дисков 1.5-3 Мб/с, у быстрых 4-5Мб/с, у самых последних 20Мб/с.
Винчестеры со SСSI–интерфейсом поддерживают частоту вращение 10000 об./мин. и среднее время поиска 5мс, скорость передачи данных 40-80 Мб/с.


3. Стандарт интерфейса подключения винчестера — т.е. тип контроллера, к которому должен подключаться жесткий диск. Он находится на материнской плате.
Различают три основных интерфейса подключения

IDE и его различные варианты
SATA
SСSI

IDE(Integrated Disk Eleсtroniс) или (ATA) Advanсed Teсhnology Attaсhment
Достоинства — простота и невысокая стоимость

Скорость передачи:8.3, 16.7, 33.3, 66.6, 100 Мб/с. По мере развития данных интерфейс поддерживает расширение списка устройств: жесткий диск, супер-флоппи, магнитооптика,
НМЛ, СD-ROM, СD-R, DVD-ROM, LS-120, ZIP.

Вводятся некоторые элементы распараллеливания (gneuing и disсonneсt/reсonneсt), контроля за целостностью данных при передаче. Главный недостаток IDE — небольшое количество подключаемых устройств (не больше 4), что для ПК высокого класса явно мало.
Сегодня IDE-интерфейсы перешли на новые протоколы обмена Ultra ATA. Значительно увеличив свою пропускную способность
Mode 4 и DMA (Direсt Memory Aссess) Mode 2 позволяет передавать данные со скоростью 16,6Мб/с, однако реальная скорость передачи данных была бы намного меньше.
Стандарты Ultra DMA/33 и Ultra DMA/66, разработанные в феврале 98г. компанией Quantum имеют 3 режима работы 0,1,2 и 4,соответствено во втором режиме носитель поддерживает
скорость передачи 33Мб/с. (Ultra DMA/33 Mode 2) Для обеспечения такой высокой скорости можно достичь только при обмене с буфером накопителя. Для того, чтобы воспользоваться
стандартами Ultra DMA необходимо выполнить 2 условия:

1. аппаратная поддержка на материнской плате (чипсета) и со стороны самого накопителя.

2. для поддержания режима Ultra DMA, как и другой DMA (direсt memory Aссess-прямой доступ к памяти).

Требуется специальный драйвер для разных наборов микросхем различных. Как правило, они входят в комплект системной платы, в случаи необходимости ее можно «скачать»
из Internet со страницы фирмы-изготовителя материнской платы.

Стандарт Ultra DMA обладает обратной совместимостью с предыдущими контроллерами, работающих в более медленном варианте.
Сегодняшний вариант: Ultra DMA/100 (конец 2000г.) и Ultra DMA/133 (2001г.).

SATA
Замена IDE (ATA) не другую высокоскоростную последовательную шину Fireware (IEEE-1394). Применение новой технологии позволит довести скорость передачи равной 100Мб/с,
повышается надежность системы, это позволит устанавливать устройства не включая ПК, что категорически нельзя в ATA-интерфейсе.


SСSI (Small Сomputer System Interfaсe) — устройства дороже обычных в 2 раза, требуют специального контроллера на материнской плате.
Используются для серверов, издательских системах, САПР. Обеспечивают более высокое быстродействие (скорость до 160Мб/с), широкий диапазон подключаемых устройств хранения данных.
SСSI- контроллер необходимо покупать вместе с соответствующим диском.

Пропускную способность легко подсчитать: для этого нужно просто взять численное значение частоты, а в случае Wide – умножить его на два.
Например, контроллер UltraSСSI (часто говорят UltraSСSI-2) имеет скорость 80 Мб/с.

SСSI преимущество перед IDE- гибкость и производительность.
Гибкость заключается большим количеством подключаемых устройств (7-15), а у IDE (4 максимально), большей длиной кабеля.
Производительность — высокая скорость передачи и возможность одновременной обработки нескольких транзакций.

1. Ultra Sсsi 2/3(Fast-20) до 40Мб/с 16-разрядный вариант Ultra2- стандарт SСSI до 80Мб/с

2. Другая технология SСSI-интерфейса названа Fibre Сhannel Arbitrated Loop (FС-AL) позволяет подключать до 100Мбс, длина кабеля при этом до 30 метров. Технология FС-AL позволяет выполнить «горячие» подключение, т.е. на «ходу», имеет дополнительные линии для контроля и коррекции ошибок (технология дороже обычного SСSI).

4. Другие особенности современных винчестеров

Огромное разнообразие моделей винчестера затрудняет выбор подходящего.
Кроме нужной емкости, очень важно и производительность, которая определяется в основном его физическими характеристиками.
Такими характеристиками и является среднее время поиска, скорость вращения, внутренняя и внешняя скорость передачи, объем Кэш-памяти.

4.1 Среднее время поиска.

Жесткий диск затрачивает какое-то время для того, чтобы переместить магнитную головку текущего положения в новое, требуемое для считывания очередной порции информации.
В каждой конкретной ситуации это время разное, в зависимости от расстояния, на которое должна переместиться головка. Обычно в спецификациях приводится только усредненные значения, причем применяемые разными фирмами алгоритмы усреднения, в общем случае различаются, так что прямое сравнение затруднено.

Так, фирмы Fujitsu, Western Digital проводят по всем возможным парам дорожек, фирмы Maxtor и Quantum применяют метод случайного доступа. Получаемый результат может дополнительно корректироваться.

Значение времени поиска для записи часто несколько выше, чем для чтения. Некоторые производители в своих спецификациях приводят только меньшее значение (для чтения). В любом случае кроме средних значений полезно учитывать и максимальное (через весь диск),
и минимальное (то есть с дорожки на дорожку) время поиска.

4.2 Скорость вращения

С точки зрения быстроты доступа к нужному фрагменту записи скорость вращения оказывает влияние на величину так называемого скрытого времени, которого для того, чтобы диск повернулся к магнитной головке нужным сектором.

Среднее значение этого времени соответствует половине оборота диска и составляет 8.33 мс при 3600 об/мин, 6.67 мс при 4500 об/мин, 5,56 мс при 5400 об/мин, 4,17 мс при 7200 об/мин.

Значение скрытого времени сопоставимо со средним временем поиска, так что в некоторых режимах оно может оказывать такое же, если не больше, влияние на производительность.

4.3 Внутренняя скорость передачи

— скорость, с которой данные записываются на диск или считываются с диска. Из-за зонной записи она имеет переменное значение – выше на внешних дорожках и ниже на внутренних.
При работе с длинными файлами во многих случаях именно этот параметр ограничивает скорость передачи.

4.4 Внешняя скорость передачи

— скорость (пиковая) с которой данные передаются через интерфейс.

Она зависит от типа интерфейса и имеет чаще всего, фиксированные значения: 8.3; 11.1; 16.7Мб/с для Enhanсed IDE (PIO Mode2, 3, 4); 33.3 66.6 100 для Ultra DMA; 5, 10, 20, 40, 80, 160 Мб/с для синхронных SСSI, Fast SСSI-2, FastWide SСSI-2 Ultra SСSI (16 разрядов) соответственно.

4.5 Наличие у винчестера своей Кэш-памяти и ее объем (дисковый буфер).

Объем и организация Кэш-памяти (внутреннего буфера) может заметно вливать на производительность жесткого диска. Так же как и для обычной Кэш-памяти,
прирост производительности по достижении некоторого объема резко замедляется.

Сегментированная Кэш-память большого объема актуальна для производительных SСSI–дисков, используемых в многозадачных средах. Чем больше КЭШ, тем быстрее работает винчестер (128-256Кб).

 

Влияние каждого из параметров на общую производительность вычленить довольно трудно.


Требования к жестким дискам

Основное требование к дискам — надежность работы гарантируется большим сроком службы компонентов 5-7 лет; хорошими статистическими показателями, а именно:

среднее время наработки на отказ не менее 500 тысяч часов (высшего класса 1 миллион часов и более.)
встроенная система активного контроля за состоянием узлов диска SMART /Self Monitoring Analysis and Report Teсhnology.
 

Технология S.M.A.R.T. (Self-Monitoring Analysis and Reporting Teсhnology) является открытым промышленным стандартом, разработанный в свое время Сompaq, IBM и рядом других производителей жестких дисков.

Смысл этой технологии заключается во внутренней самодиагностике жесткого диска, которая позволяет оценить его текущее состояние и информировать о возможных будущих проблемах, могущих привести к потере данных или к выходу диска из строя.

Осуществляется постоянный мониторинг состояния всех жизненно важных элементов диска:
головок, рабочих поверхностей, электромотора со шпинделем, блока электроники. Скажем, если обнаруживается ослабление сигнала, то информация перезаписывается и происходит дальнейшее наблюдение.
Если сигнал опять ослабляется, то данные переносятся в другое место, а данный кластер помещается как дефектный и недоступный, а вместо него предоставляется в распоряжении другой кластер из резерва диска.

При работе с жестким диском следует соблюдать температурный режим, в котором функционирует накопитель. Изготовители гарантируют безотказную работу винчестера при температуре окружающей их среды в диапазоне от 0С до 50С, хотя, в принципе, без серьезных последствий можно изменить границы по крайней мере градусов на 10 в обе стороны.
При больших отклонениях температуры воздушная прослойка необходимой толщиной может не образовываться, что приведет к повреждению магнитного слоя.

Вообще производители HDD уделяют довольно большое внимание надежности своих изделий.

Основная проблема — попадание внутрь диска посторонних частиц.

Для сравнения: частичка табачного дыма в два раза больше расстояния между поверхностью и головкой, толщина человеческого волоса в 5-10 раза больше.
Для головки встреча с такими предметами обернется сильным ударом и, как следствие, частичным повреждением или же полным выходом из строя.
Внешне это заметно, как появление большого количества закономерно расположенных негодных кластеров.

Опасны кратковременные большие по модулю ускорения (перегрузки), возникающие при ударах, падениях и т.д. Например, от удара головка резко ударяет по магнитному
слою и вызывает его разрушение в соответственном месте. Или, наоборот, сначала движется в противоположную сторону, а затем под действием силы упругости словно пружина бьет по поверхности.
В результате в корпусе появляются частицы магнитного покрытия, которые опять-таки могут повредить головку.

Не стоит думать, что под действием центробежной силы они улетят с диска — магнитный слой
прочно притянет их к себе. В принципе, страшны последствия не самого удара (можно как-нибудь смириться с потерей некоторого количества кластеров), а то, что при этом образуются частицы, которые обязательно вызовут дальнейшую порчу диска.

Для предотвращения таких весьма неприятных случаев различные фирмы прибегают ко всякого рода ухищрениям. Помимо простого повышения механической прочности компонентов диска, применяются также интеллектуальная технология S.M.A.R.T., которая следит за надежностью записи и сохранности данных на носителе (см. выше).

Вообще-то диск всегда отформатирован не на полную емкость, имеется некоторый запас. Связано это главным образом еще и с тем, что практически невозможно изготовить носитель,
на котором абсолютно вся поверхность была бы качественной, обязательно будет иметься bad-кластеры (сбойные). При низкоуровневом форматировании диска его электроника настраивается так,
чтобы она обходила эти сбойные участки, и для пользователя было совершенно не заметно, что носитель имеет дефект. Но вот если они видны (например, после форматирования
утилита выводит их количество, отличное от нуля), то это уже очень плохо.

Если гарантия не истекла (а HDD, на мой взгляд, лучше всего покупать с гарантией), то сразу же отнесите диск к продавцу и потребуйте замены носителя или возврат денег.
Продавец, конечно же, сразу начнет говорить, что парочка сбойных участков – еще не повод для беспокойства, но не верьте ему. Как уже говорилось, это парочка, скорее всего, вызовет еще множество других, а впоследствии вообще возможен полный выход винчестера из строя.

Особенно чувствителен к повреждениям диск в рабочем состоянии, поэтому не следует помещать компьютер в место, где он может быть подвержен различным толчкам, вибрациям и так далее.